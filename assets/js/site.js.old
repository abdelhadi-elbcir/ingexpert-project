// ===== Year
document.addEventListener("DOMContentLoaded", () => {
  const year = document.getElementById("yearNow");
  if (year) year.textContent = new Date().getFullYear();
});

// ===== Mobile menu toggle (no jQuery)
document.addEventListener("DOMContentLoaded", () => {
  const toggle = document.getElementById("menuToggle");
  const nav = document.getElementById("mainNav");
  if (!toggle || !nav) return;

  toggle.addEventListener("click", () => {
    const isOpen = nav.classList.toggle("is-open");
    toggle.setAttribute("aria-expanded", String(isOpen));
  });

  // close menu when clicking a link (mobile UX)
  nav.addEventListener("click", (e) => {
    const a = e.target.closest("a");
    if (a && nav.classList.contains("is-open")) {
      nav.classList.remove("is-open");
      toggle.setAttribute("aria-expanded", "false");
    }
  });
});

// ===== Hide header on scroll down, show on scroll up
document.addEventListener("DOMContentLoaded", () => {
  const header = document.getElementById("siteHeader");
  if (!header) return;

  let lastY = window.scrollY;
  const threshold = 10;

  window.addEventListener("scroll", () => {
    const y = window.scrollY;

    // at top => always show
    if (y < 20) {
      header.classList.remove("is-hidden");
      lastY = y;
      return;
    }

    // scroll down => hide
    if (y > lastY + threshold) {
      header.classList.add("is-hidden");
      lastY = y;
      return;
    }

    // scroll up => show
    if (y < lastY - threshold) {
      header.classList.remove("is-hidden");
      lastY = y;
    }
  }, { passive: true });
});
